<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>USBJoystick: USBJoystick Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">USBJoystick
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">USBJoystick Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>USB Interface to USB joystick/game pad, such as Logitech 'Dual Action' game pad.  
 <a href="classUSBJoystick.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="USBJoystick_8h_source.html">USBJoystick.h</a>&gt;</code></p>

<p><a href="classUSBJoystick-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af8da40aa0bce3918e3a76001f2b98549"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUSBJoystick.html#af8da40aa0bce3918e3a76001f2b98549">USBJoystick</a> ()</td></tr>
<tr class="memitem:a13bb9ebbd12cdf9fcc34ca0049c847c2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUSBJoystick.html#a13bb9ebbd12cdf9fcc34ca0049c847c2">init</a> ()</td></tr>
<tr class="memitem:a269b42d9f530d71087767ac7ba6e2640"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUSBJoystick.html#a269b42d9f530d71087767ac7ba6e2640">run</a> ()</td></tr>
<tr class="memitem:aa5157b51e02f9baa9c725e13d33a52a2"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUSBJoystick.html#aa5157b51e02f9baa9c725e13d33a52a2">stickValue</a> (uint8_t stick)</td></tr>
<tr class="memitem:ab81634dfdcd4d98b9978ef03a9b2f069"><td class="memItemLeft" align="right" valign="top">boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUSBJoystick.html#ab81634dfdcd4d98b9978ef03a9b2f069">buttonValue</a> (uint8_t button)</td></tr>
<tr class="memitem:ae373a6476bb1becb57004a5fd765e5a3"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUSBJoystick.html#ae373a6476bb1becb57004a5fd765e5a3">hatValue</a> (uint8_t hat)</td></tr>
<tr class="memitem:a02861579520fb6832aaaeb0dd1200f6d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUSBJoystick.html#a02861579520fb6832aaaeb0dd1200f6d">setStickNewValueCallback</a> (void(*cb)(uint8_t stick, uint8_t value))</td></tr>
<tr class="memitem:a9b7731647d0bd901bd128568f4e92a30"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUSBJoystick.html#a9b7731647d0bd901bd128568f4e92a30">setButtonNewValueCallback</a> (void(*cb)(uint8_t button, uint8_t value))</td></tr>
<tr class="memitem:a2fd6e01d51a1482c46c9828a6cb117e2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUSBJoystick.html#a2fd6e01d51a1482c46c9828a6cb117e2">setHatNewValueCallback</a> (void(*cb)(uint8_t hat, uint8_t value))</td></tr>
<tr class="memitem:a7fb08c91b38db9dfa8986a4522513e84"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUSBJoystick.html#a7fb08c91b38db9dfa8986a4522513e84">setStickValueDidChangeCallback</a> (void(*cb)(uint8_t stick, uint8_t value))</td></tr>
<tr class="memitem:a50d9a74675c8c939d3fb6d8afdf89d18"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUSBJoystick.html#a50d9a74675c8c939d3fb6d8afdf89d18">setButtonValueDidChangeCallback</a> (void(*cb)(uint8_t button, uint8_t value))</td></tr>
<tr class="memitem:a1e6ecd05431c42b5c9970eda4cf2257f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUSBJoystick.html#a1e6ecd05431c42b5c9970eda4cf2257f">setHatValueDidChangeCallback</a> (void(*cb)(uint8_t hat, uint8_t value))</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a52dd15812e449e11dc58762495762abe"><td class="memItemLeft" align="right" valign="top">boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUSBJoystick.html#a52dd15812e449e11dc58762495762abe">device_init</a> ()</td></tr>
<tr class="memitem:af66005985df358d0e8a190dabc071cb8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUSBJoystick.html#af66005985df358d0e8a190dabc071cb8">poll</a> ()</td></tr>
<tr class="memitem:a39d608eb321f8415c73f2952348f2aa5"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUSBJoystick.html#a39d608eb321f8415c73f2952348f2aa5">stickNewValue</a> (uint8_t stick, uint8_t value)</td></tr>
<tr class="memitem:ac69d5be69f4e95dc45ab049d402c7bb4"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUSBJoystick.html#ac69d5be69f4e95dc45ab049d402c7bb4">buttonNewValue</a> (uint8_t button, boolean value)</td></tr>
<tr class="memitem:a94deb4bb2179c18add9642813276c95f"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUSBJoystick.html#a94deb4bb2179c18add9642813276c95f">hatNewValue</a> (uint8_t hat, uint8_t value)</td></tr>
<tr class="memitem:a17755793ecb23a5932c55e0f8bedffab"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUSBJoystick.html#a17755793ecb23a5932c55e0f8bedffab">stickValueDidChange</a> (uint8_t stick, uint8_t value)</td></tr>
<tr class="memitem:a5d65d88422d93ec792e9945b28afd124"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUSBJoystick.html#a5d65d88422d93ec792e9945b28afd124">buttonValueDidChange</a> (uint8_t button, boolean value)</td></tr>
<tr class="memitem:a23d870c0d428ccea43a1b29403437625"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUSBJoystick.html#a23d870c0d428ccea43a1b29403437625">hatValueDidChange</a> (uint8_t hat, uint8_t value)</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>USB Interface to USB joystick/game pad, such as Logitech 'Dual Action' game pad. </p>
<dl class="section user"><dt>Overview</dt><dd></dd></dl>
<p>A class that interfaces with a USB Joystick or game pad. It can be subclassed to get control when new input values are read, or when they actually change. Alternatively, you can set up callback functions to be called when new input values are read, or when they actually change.</p>
<p>Input data such as stick positions, button presses and hat-switch directions are read from the device and delivered to the calling application.</p>
<p><a class="el" href="classUSBJoystick.html" title="USB Interface to USB joystick/game pad, such as Logitech &#39;Dual Action&#39; game pad.">USBJoystick</a> uses the USB_Host_Shield library to initialise and interrogate a USB joystick or game pad. When the task() function is called, an attempt to read new values from the joystick is made every USBJOYSTICK_POLL_INTERVAL milliseconds. If successful the NewValue virtual functions are called. These in turn call the ValueDidChange virtual functions if the value changed since last poll. After the poll the new values can also be read with the data accessor functions.</p>
<p>The virtual functions will call their respective callbacks if callback functions have been set up.</p>
<p>Therefore developers have several choices for getting input data from a device:</p>
<ul>
<li>subclass <a class="el" href="classUSBJoystick.html" title="USB Interface to USB joystick/game pad, such as Logitech &#39;Dual Action&#39; game pad.">USBJoystick</a> and override the *NewValue() and/or *ValueDidChange() functions.</li>
<li>set callback functions with set*NewValueCallback() and set*ValueDidChangeCallback() functions</li>
<li>Asynchronously read current values with the *Value() functions.</li>
</ul>
<dl class="section user"><dt>Input indexes</dt><dd></dd></dl>
<p>The joystick/game pad is considered to have a number of joysticks, buttons and hat switches. In order to identifiy which joysticks, buttons or hat switch is being referred to in callbacks etc, an index number is used. Macros can be used to refer to specific items by name, see the USBJOYSTICK_STICK_*, USBJOYSTICK_BUTTON_* and USBJOYSTICK_HAT_* macros. The Logitech Dula Action game pad has 4 sticks (really 2 physical sticks with vertical and horizontal movement), 13 buttons and 1 hat switch.</p>
<dl class="section user"><dt>Input Device Values</dt><dd></dd></dl>
<p>Stick positions are represented as 8 bit unsigned integers:</p>
<ul>
<li>0 is fully left or up</li>
<li>255 is fully right or down</li>
</ul>
<p>Button positions are represented by booleans:</p>
<ul>
<li>true - button is pressed (in the case of MODE button, mode is enabled and the red light is on)</li>
<li>false - otherwise</li>
</ul>
<p>Hat switch positions are represented as 8 bit unsigned integers. The current hat position is one of USBJOYSTICK_HAT_POS_*. </p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="af8da40aa0bce3918e3a76001f2b98549"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">USBJoystick::USBJoystick </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Constructor. Stick positions are initialised to 0x80, buttons to false and hat switches to idle </p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="ac69d5be69f4e95dc45ab049d402c7bb4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void USBJoystick::buttonNewValue </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>button</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">boolean&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This virtual function is called when a new button value is read from the USB device Default implementation calls the apropriate callback (if set) then calls <a class="el" href="classUSBJoystick.html#a5d65d88422d93ec792e9945b28afd124">buttonValueDidChange()</a> if the value changed since the last poll. Subclasses may override this to change get control for each value read and change the default behaviour </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">button</td><td>The button index, one of USBJOYSTICK_BUTTON_* </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">value</td><td>The new button value </td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="classUSBJoystick.html#a5d65d88422d93ec792e9945b28afd124">buttonValueDidChange()</a>.</p>

<p>Referenced by <a class="el" href="classUSBJoystick.html#af66005985df358d0e8a190dabc071cb8">poll()</a>.</p>

</div>
</div>
<a class="anchor" id="ab81634dfdcd4d98b9978ef03a9b2f069"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boolean USBJoystick::buttonValue </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>button</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read the current value of a button param[in] button The button index. One of USBJOYSTICK_BUTTON_* </p>
<dl class="section return"><dt>Returns:</dt><dd>the most recently read button position value </dd></dl>

</div>
</div>
<a class="anchor" id="a5d65d88422d93ec792e9945b28afd124"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void USBJoystick::buttonValueDidChange </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>button</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">boolean&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This virtual function is called when a button value changes Default implementation calls the apropriate callback (if set) </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">button</td><td>The button index, one of USBJOYSTICK_BUTTON_* </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">value</td><td>The new button value </td></tr>
  </table>
  </dd>
</dl>

<p>Referenced by <a class="el" href="classUSBJoystick.html#ac69d5be69f4e95dc45ab049d402c7bb4">buttonNewValue()</a>.</p>

</div>
</div>
<a class="anchor" id="a52dd15812e449e11dc58762495762abe"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boolean USBJoystick::device_init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Initialises the USB hardware. Internal use: should not be called directly. </p>
<dl class="section return"><dt>Returns:</dt><dd>true if initialisation was successful </dd></dl>

<p>Referenced by <a class="el" href="classUSBJoystick.html#a269b42d9f530d71087767ac7ba6e2640">run()</a>.</p>

</div>
</div>
<a class="anchor" id="a94deb4bb2179c18add9642813276c95f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void USBJoystick::hatNewValue </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>hat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This virtual function is called when a new hat switch value is read from the USB device Default implementation calls the apropriate callback (if set) then calls <a class="el" href="classUSBJoystick.html#a23d870c0d428ccea43a1b29403437625">hatValueDidChange()</a> if the value changed since the last poll. Subclasses may override this to change get control for each value read and change the default behaviour </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">hat</td><td>The hat switch index, one of USBJOYSTICK_HAT_* </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">value</td><td>The new hat position value </td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="classUSBJoystick.html#a23d870c0d428ccea43a1b29403437625">hatValueDidChange()</a>.</p>

<p>Referenced by <a class="el" href="classUSBJoystick.html#af66005985df358d0e8a190dabc071cb8">poll()</a>.</p>

</div>
</div>
<a class="anchor" id="ae373a6476bb1becb57004a5fd765e5a3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t USBJoystick::hatValue </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>hat</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read the current value of a joystick </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">hat</td><td>The stick index. One of USBJOYSTICK_HAT_* </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>the most recently read hat position value, one of USBJOYSTICK_HAT_POS_* </dd></dl>

</div>
</div>
<a class="anchor" id="a23d870c0d428ccea43a1b29403437625"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void USBJoystick::hatValueDidChange </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>hat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This virtual function is called when a hat switch value changes Default implementation calls the apropriate callback (if set) </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">hat</td><td>The hat index, one of USBJOYSTICK_HAT_* </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">value</td><td>The new hat switch value </td></tr>
  </table>
  </dd>
</dl>

<p>Referenced by <a class="el" href="classUSBJoystick.html#a94deb4bb2179c18add9642813276c95f">hatNewValue()</a>.</p>

</div>
</div>
<a class="anchor" id="a13bb9ebbd12cdf9fcc34ca0049c847c2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USBJoystick::init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Library initialisation. Must be called once during setup() Enables the USB hardware and delays 200msec </p>

</div>
</div>
<a class="anchor" id="af66005985df358d0e8a190dabc071cb8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void USBJoystick::poll </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Polls the USB device for a new reading. Internal use: should not be called directly. </p>

<p>References <a class="el" href="classUSBJoystick.html#ac69d5be69f4e95dc45ab049d402c7bb4">buttonNewValue()</a>, <a class="el" href="classUSBJoystick.html#a94deb4bb2179c18add9642813276c95f">hatNewValue()</a>, and <a class="el" href="classUSBJoystick.html#a39d608eb321f8415c73f2952348f2aa5">stickNewValue()</a>.</p>

<p>Referenced by <a class="el" href="classUSBJoystick.html#a269b42d9f530d71087767ac7ba6e2640">run()</a>.</p>

</div>
</div>
<a class="anchor" id="a269b42d9f530d71087767ac7ba6e2640"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USBJoystick::run </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>USB Device regular poll function. Attempts to read current data from the USB device. If successful, calls the *NewValue() and/or *ValueDidChange() functions, and any calbacks if so configured. This must be called as often as possible in your main loop(). Calls the intenal <a class="el" href="classUSBJoystick.html#af66005985df358d0e8a190dabc071cb8">poll()</a> functi0on every USBJOYSTICK_POLL_INTERVAL milliseconds </p>

<p>References <a class="el" href="classUSBJoystick.html#a52dd15812e449e11dc58762495762abe">device_init()</a>, and <a class="el" href="classUSBJoystick.html#af66005985df358d0e8a190dabc071cb8">poll()</a>.</p>

</div>
</div>
<a class="anchor" id="a9b7731647d0bd901bd128568f4e92a30"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USBJoystick::setButtonNewValueCallback </td>
          <td>(</td>
          <td class="paramtype">void(*)(uint8_t button, uint8_t value)&#160;</td>
          <td class="paramname"><em>cb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set a callback to be called when a button value is read from the usb device. Overrides any previously set callback. May be called at any time to set or change the callback. </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cb</td><td>The new callback function pointer </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a50d9a74675c8c939d3fb6d8afdf89d18"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USBJoystick::setButtonValueDidChangeCallback </td>
          <td>(</td>
          <td class="paramtype">void(*)(uint8_t button, uint8_t value)&#160;</td>
          <td class="paramname"><em>cb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set a callback to be called when a button value is read from the usb device and the value has changed since the last poll. Overrides any previously set callback. May be called at any time to set or change the callback. </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cb</td><td>The new callback function pointer </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a2fd6e01d51a1482c46c9828a6cb117e2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USBJoystick::setHatNewValueCallback </td>
          <td>(</td>
          <td class="paramtype">void(*)(uint8_t hat, uint8_t value)&#160;</td>
          <td class="paramname"><em>cb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set a callback to be called when a hat value is read from the usb device. Overrides any previously set callback. May be called at any time to set or change the callback. </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cb</td><td>The new callback function pointer </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a1e6ecd05431c42b5c9970eda4cf2257f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USBJoystick::setHatValueDidChangeCallback </td>
          <td>(</td>
          <td class="paramtype">void(*)(uint8_t hat, uint8_t value)&#160;</td>
          <td class="paramname"><em>cb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set a callback to be called when a hat value is read from the usb device and the value has changed since the last poll. Overrides any previously set callback. May be called at any time to set or change the callback. </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cb</td><td>The new callback function pointer </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a02861579520fb6832aaaeb0dd1200f6d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USBJoystick::setStickNewValueCallback </td>
          <td>(</td>
          <td class="paramtype">void(*)(uint8_t stick, uint8_t value)&#160;</td>
          <td class="paramname"><em>cb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set a callback to be called when a stick value is read from the usb device. Overrides any previously set callback. May be called at any time to set or change the callback. </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cb</td><td>The new callback function pointer </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a7fb08c91b38db9dfa8986a4522513e84"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USBJoystick::setStickValueDidChangeCallback </td>
          <td>(</td>
          <td class="paramtype">void(*)(uint8_t stick, uint8_t value)&#160;</td>
          <td class="paramname"><em>cb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set a callback to be called when a stick value is read from the usb device and the value has changed since the last poll. Overrides any previously set callback. May be called at any time to set or change the callback. </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cb</td><td>The new callback function pointer </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a39d608eb321f8415c73f2952348f2aa5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void USBJoystick::stickNewValue </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>stick</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This virtual function is called when a new stick value is read from the USB device Default implementation calls the apropriate callback (if set) then calls <a class="el" href="classUSBJoystick.html#a17755793ecb23a5932c55e0f8bedffab">stickValueDidChange()</a> if the value changed since the last poll. Subclasses may override this to change get control for each value read and change the default behaviour </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">stick</td><td>The stick index, one of USBJOYSTICK_STICK_* </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">value</td><td>The new stick value </td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="classUSBJoystick.html#a17755793ecb23a5932c55e0f8bedffab">stickValueDidChange()</a>.</p>

<p>Referenced by <a class="el" href="classUSBJoystick.html#af66005985df358d0e8a190dabc071cb8">poll()</a>.</p>

</div>
</div>
<a class="anchor" id="aa5157b51e02f9baa9c725e13d33a52a2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t USBJoystick::stickValue </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>stick</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read the current value of a joystick </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">stick</td><td>The stick index. One of USBJOYSTICK_STICK_* </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>the most recently read stick position value </dd></dl>

</div>
</div>
<a class="anchor" id="a17755793ecb23a5932c55e0f8bedffab"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void USBJoystick::stickValueDidChange </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>stick</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This virtual function is called when a stick value changes Default implementation calls the apropriate callback (if set) </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">stick</td><td>The stick index, one of USBJOYSTICK_STICK_* </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">value</td><td>The new stick value </td></tr>
  </table>
  </dd>
</dl>

<p>Referenced by <a class="el" href="classUSBJoystick.html#a39d608eb321f8415c73f2952348f2aa5">stickNewValue()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="USBJoystick_8h_source.html">USBJoystick.h</a></li>
<li>USBJoystick.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1
</small></address>
</body>
</html>
